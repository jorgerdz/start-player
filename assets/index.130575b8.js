const Ie=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerpolicy&&(u.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?u.credentials="include":r.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(r){if(r.ep)return;r.ep=!0;const u=n(r);fetch(r.href,u)}};Ie();function E(){}function be(e){return e()}function fe(){return Object.create(null)}function M(e){e.forEach(be)}function ve(e){return typeof e=="function"}function re(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Be(e){return Object.keys(e).length===0}function R(e,...t){if(e==null)return E;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Oe(e,t,n){e.$$.on_destroy.push(R(t,n))}let X=!1;function je(){X=!0}function ze(){X=!1}function We(e,t,n,i){for(;e<t;){const r=e+(t-e>>1);n(r)<=i?e=r+1:t=r}return e}function Ye(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if(e.nodeName==="HEAD"){const l=[];for(let o=0;o<t.length;o++){const d=t[o];d.claim_order!==void 0&&l.push(d)}t=l}const n=new Int32Array(t.length+1),i=new Int32Array(t.length);n[0]=-1;let r=0;for(let l=0;l<t.length;l++){const o=t[l].claim_order,d=(r>0&&t[n[r]].claim_order<=o?r+1:We(1,r,p=>t[n[p]].claim_order,o))-1;i[l]=n[d]+1;const f=d+1;n[f]=l,r=Math.max(f,r)}const u=[],s=[];let c=t.length-1;for(let l=n[r]+1;l!=0;l=i[l-1]){for(u.push(t[l-1]);c>=l;c--)s.push(t[c]);c--}for(;c>=0;c--)s.push(t[c]);u.reverse(),s.sort((l,o)=>l.claim_order-o.claim_order);for(let l=0,o=0;l<s.length;l++){for(;o<u.length&&s[l].claim_order>=u[o].claim_order;)o++;const d=o<u.length?u[o]:null;e.insertBefore(s[l],d)}}function h(e,t){if(X){for(Ye(e),(e.actual_end_child===void 0||e.actual_end_child!==null&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild);e.actual_end_child!==null&&e.actual_end_child.claim_order===void 0;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?(t.claim_order!==void 0||t.parentNode!==e)&&e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else(t.parentNode!==e||t.nextSibling!==null)&&e.appendChild(t)}function xe(e,t,n){X&&!n?h(e,t):(t.parentNode!==e||t.nextSibling!=n)&&e.insertBefore(t,n||null)}function g(e){e.parentNode.removeChild(e)}function Fe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ie(e){return document.createElement(e)}function N(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function w(e){return document.createTextNode(e)}function a(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function de(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function x(e){return Array.from(e.childNodes)}function He(e){e.claim_info===void 0&&(e.claim_info={last_index:0,total_claimed:0})}function we(e,t,n,i,r=!1){He(e);const u=(()=>{for(let s=e.claim_info.last_index;s<e.length;s++){const c=e[s];if(t(c)){const l=n(c);return l===void 0?e.splice(s,1):e[s]=l,r||(e.claim_info.last_index=s),c}}for(let s=e.claim_info.last_index-1;s>=0;s--){const c=e[s];if(t(c)){const l=n(c);return l===void 0?e.splice(s,1):e[s]=l,r?l===void 0&&e.claim_info.last_index--:e.claim_info.last_index=s,c}}return i()})();return u.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,u}function Ee(e,t,n,i){return we(e,r=>r.nodeName===t,r=>{const u=[];for(let s=0;s<r.attributes.length;s++){const c=r.attributes[s];n[c.name]||u.push(c.name)}u.forEach(s=>r.removeAttribute(s))},()=>i(t))}function Pe(e,t,n){return Ee(e,t,n,ie)}function S(e,t,n){return Ee(e,t,n,N)}function P(e,t){return we(e,n=>n.nodeType===3,n=>{const i=""+t;if(n.data.startsWith(i)){if(n.data.length!==i.length)return n.splitText(i.length)}else n.data=i},()=>w(t),!0)}function I(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function T(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}let le;function O(e){le=e}const B=[],he=[],H=[],_e=[],Ke=Promise.resolve();let ee=!1;function Re(){ee||(ee=!0,Ke.then(Ne))}function te(e){H.push(e)}const U=new Set;let F=0;function Ne(){const e=le;do{for(;F<B.length;){const t=B[F];F++,O(t),Ve(t.$$)}for(O(null),B.length=0,F=0;he.length;)he.pop()();for(let t=0;t<H.length;t+=1){const n=H[t];U.has(n)||(U.add(n),n())}H.length=0}while(B.length);for(;_e.length;)_e.pop()();ee=!1,U.clear(),O(e)}function Ve(e){if(e.fragment!==null){e.update(),M(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(te)}}const K=new Set;let A;function Xe(){A={r:0,c:[],p:A}}function Ge(){A.r||M(A.c),A=A.p}function j(e,t){e&&e.i&&(K.delete(e),e.i(t))}function ne(e,t,n,i){if(e&&e.o){if(K.has(e))return;K.add(e),A.c.push(()=>{K.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}}function Je(e){e&&e.c()}function Qe(e,t){e&&e.l(t)}function qe(e,t,n,i){const{fragment:r,on_mount:u,on_destroy:s,after_update:c}=e.$$;r&&r.m(t,n),i||te(()=>{const l=u.map(be).filter(ve);s?s.push(...l):M(l),e.$$.on_mount=[]}),c.forEach(te)}function Se(e,t){const n=e.$$;n.fragment!==null&&(M(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ze(e,t){e.$$.dirty[0]===-1&&(B.push(e),Re(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ke(e,t,n,i,r,u,s,c=[-1]){const l=le;O(e);const o=e.$$={fragment:null,ctx:null,props:u,update:E,not_equal:r,bound:fe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:fe(),dirty:c,skip_bound:!1,root:t.target||l.$$.root};s&&s(o.root);let d=!1;if(o.ctx=n?n(e,t.props||{},(f,p,...m)=>{const b=m.length?m[0]:p;return o.ctx&&r(o.ctx[f],o.ctx[f]=b)&&(!o.skip_bound&&o.bound[f]&&o.bound[f](b),d&&Ze(e,f)),p}):[],o.update(),d=!0,M(o.before_update),o.fragment=i?i(o.ctx):!1,t.target){if(t.hydrate){je();const f=x(t.target);o.fragment&&o.fragment.l(f),f.forEach(g)}else o.fragment&&o.fragment.c();t.intro&&j(e.$$.fragment),qe(e,t.target,t.anchor,t.customElement),ze(),Ne()}O(l)}class Ae{$destroy(){Se(this,1),this.$destroy=E}$on(t,n){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!Be(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Ue(e){let t,n,i,r,u,s,c,l,o,d,f,p,m,b,_,G,k,q,J,W,Q,Y;return{c(){t=ie("div"),n=N("svg"),i=N("title"),r=w("Player "),u=w(e[2]),s=N("circle"),c=N("defs"),l=N("path"),o=N("animateTransform"),d=N("text"),f=N("textPath"),p=w("Player "),m=w(e[2]),b=w(" \u2022 Player "),_=w(e[2]),G=w(` \u2022\r
            `),k=N("text"),q=N("textPath"),J=w("State "),W=w(e[6]),Q=w(" \u2022 Winner "),Y=w(e[5]),this.h()},l(y){t=Pe(y,"DIV",{style:!0,class:!0});var v=x(t);n=S(v,"svg",{xmlns:!0,"xmlns:xlink":!0,viewBox:!0,class:!0,transform:!0});var L=x(n);i=S(L,"title",{class:!0});var Z=x(i);r=P(Z,"Player "),u=P(Z,e[2]),Z.forEach(g),s=S(L,"circle",{cx:!0,cy:!0,r:!0,class:!0}),x(s).forEach(g),c=S(L,"defs",{class:!0});var oe=x(c);l=S(oe,"path",{d:!0,id:!0,class:!0});var ce=x(l);o=S(ce,"animateTransform",{attributeName:!0,begin:!0,dur:!0,type:!0,from:!0,to:!0,repeatCount:!0,class:!0}),x(o).forEach(g),ce.forEach(g),oe.forEach(g),d=S(L,"text",{dy:!0,textLength:!0,class:!0});var ue=x(d);f=S(ue,"textPath",{"xlink:href":!0,class:!0});var D=x(f);p=P(D,"Player "),m=P(D,e[2]),b=P(D," \u2022 Player "),_=P(D,e[2]),G=P(D,` \u2022\r
            `),D.forEach(g),ue.forEach(g),k=S(L,"text",{dy:!0,textLength:!0,class:!0});var ae=x(k);q=S(ae,"textPath",{"xlink:href":!0,class:!0});var C=x(q);J=P(C,"State "),W=P(C,e[6]),Q=P(C," \u2022 Winner "),Y=P(C,e[5]),C.forEach(g),ae.forEach(g),L.forEach(g),v.forEach(g),this.h()},h(){a(i,"class","s-E9_ygDPpv--5"),a(s,"cx","250"),a(s,"cy","250"),a(s,"r","250"),a(s,"class","svelte-10iodqf"),a(o,"attributeName","transform"),a(o,"begin","0s"),a(o,"dur","30s"),a(o,"type","rotate"),a(o,"from","0 250 250"),a(o,"to","360 250 250"),a(o,"repeatCount","indefinite"),a(o,"class","s-E9_ygDPpv--5"),a(l,"d","M50,250c0-110.5,89.5-200,200-200s200,89.5,200,200s-89.5,200-200,200S50,360.5,50,250"),a(l,"id","textcircle"),a(l,"class","s-E9_ygDPpv--5"),a(c,"class","s-E9_ygDPpv--5"),de(f,"xlink:href","#textcircle"),a(f,"class","s-E9_ygDPpv--5 svelte-10iodqf"),a(d,"dy","0"),a(d,"textLength","1201"),a(d,"class","s-E9_ygDPpv--5 svelte-10iodqf"),de(q,"xlink:href","#textcircle"),a(q,"class","s-E9_ygDPpv--5 svelte-10iodqf"),a(k,"dy","80"),a(k,"textLength","1200"),a(k,"class","s-E9_ygDPpv--5 svelte-10iodqf"),a(n,"xmlns","http://www.w3.org/2000/svg"),a(n,"xmlns:xlink","http://www.w3.org/1999/xlink"),a(n,"viewBox","0 0 500 500"),a(n,"class","s-E9_ygDPpv--5 svelte-10iodqf"),a(n,"transform","translate(-100, -100)"),T(t,"--color",e[7]),T(t,"--x",e[0]+"%"),T(t,"--y",e[1]+"%"),a(t,"class","svelte-10iodqf")},m(y,v){xe(y,t,v),h(t,n),h(n,i),h(i,r),h(i,u),h(n,s),h(n,c),h(c,l),h(l,o),h(n,d),h(d,f),h(f,p),h(f,m),h(f,b),h(f,_),h(f,G),h(n,k),h(k,q),h(q,J),h(q,W),h(q,Q),h(q,Y)},p(y,[v]){v&4&&I(u,y[2]),v&4&&I(m,y[2]),v&4&&I(_,y[2]),v&64&&I(W,y[6]),v&32&&I(Y,y[5]),v&128&&T(t,"--color",y[7]),v&1&&T(t,"--x",y[0]+"%"),v&2&&T(t,"--y",y[1]+"%")},i:E,o:E,d(y){y&&g(t)}}}function et(){return`#${Math.floor(Math.random()*16777215).toString(16)}`}function tt(e,t,n){let i,r=E,u=()=>(r(),r=R(m,_=>n(5,i=_)),m),s,c=E,l=()=>(c(),c=R(p,_=>n(6,s=_)),p);e.$$.on_destroy.push(()=>r()),e.$$.on_destroy.push(()=>c());let{x:o}=t,{y:d}=t,{playerNumber:f=1}=t,{state:p}=t;l();let{winner:m}=t;u();let b=et();return e.$$set=_=>{"x"in _&&n(0,o=_.x),"y"in _&&n(1,d=_.y),"playerNumber"in _&&n(2,f=_.playerNumber),"state"in _&&l(n(3,p=_.state)),"winner"in _&&u(n(4,m=_.winner))},e.$$.update=()=>{e.$$.dirty&100&&s==="show"&&i!==f&&n(7,b="grey")},[o,d,f,p,m,i,s,b]}class nt extends Ae{constructor(t){super(),ke(this,t,tt,Ue,re,{x:0,y:1,playerNumber:2,state:3,winner:4})}}const $=[];function Le(e,t){return{subscribe:De(e,t).subscribe}}function De(e,t=E){let n;const i=new Set;function r(c){if(re(e,c)&&(e=c,n)){const l=!$.length;for(const o of i)o[1](),$.push(o,e);if(l){for(let o=0;o<$.length;o+=2)$[o][0]($[o+1]);$.length=0}}}function u(c){r(c(e))}function s(c,l=E){const o=[c,l];return i.add(o),i.size===1&&(n=t(r)||E),c(e),()=>{i.delete(o),i.size===0&&(n(),n=null)}}return{set:r,update:u,subscribe:s}}function se(e,t,n){const i=!Array.isArray(e),r=i?[e]:e,u=t.length<2;return Le(n,s=>{let c=!1;const l=[];let o=0,d=E;const f=()=>{if(o)return;d();const m=t(i?l[0]:l,s);u?s(m):d=ve(m)?m:E},p=r.map((m,b)=>R(m,_=>{l[b]=_,o&=~(1<<b),c&&f()},()=>{o|=1<<b}));return c=!0,f(),function(){M(p),d()}})}const V=["await","decide","show"],rt=0,z=De(V[0]),Te=Le([],function(t){function n(r){return{x:r.clientX/window.screen.width*100,y:r.clientY/window.screen.height*100}}function i(r){t(r.map(n))}document.addEventListener("touchstart",r=>{i([...r.touches])}),document.addEventListener("touchmove",r=>{i([...r.touches])}),document.addEventListener("touchend",r=>{i([...r.touches])})}),$e=se(Te,e=>e.length);let me;const Me=se($e,(e,t)=>{z.set(V[0]),!(e<rt)&&(clearTimeout(me),me=setTimeout(()=>{z.set(V[1]),t(e)},2e3))},0);let pe;const Ce=se(Me,(e,t)=>{let n=Math.floor(Math.random()*(e+1));clearTimeout(pe),pe=setTimeout(()=>{z.set(V[2]),t(n)},1e3)},0);document.addEventListener("gesturestart",function(e){e.preventDefault()});document.addEventListener("gesturechange",function(e){e.preventDefault()});document.addEventListener("gestureend",function(e){e.preventDefault()});function ge(e,t,n){const i=e.slice();return i[1]=t[n],i[3]=n,i}function ye(e){let t,n;return t=new nt({props:{x:e[1].x,y:e[1].y,state:z,winner:Ce,playerNumber:e[3]}}),{c(){Je(t.$$.fragment)},l(i){Qe(t.$$.fragment,i)},m(i,r){qe(t,i,r),n=!0},p(i,r){const u={};r&1&&(u.x=i[1].x),r&1&&(u.y=i[1].y),t.$set(u)},i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){ne(t.$$.fragment,i),n=!1},d(i){Se(t,i)}}}function it(e){let t,n,i=e[0],r=[];for(let s=0;s<i.length;s+=1)r[s]=ye(ge(e,i,s));const u=s=>ne(r[s],1,1,()=>{r[s]=null});return{c(){t=ie("main");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){t=Pe(s,"MAIN",{class:!0});var c=x(t);for(let l=0;l<r.length;l+=1)r[l].l(c);c.forEach(g),this.h()},h(){a(t,"class","svelte-1a38ywm")},m(s,c){xe(s,t,c);for(let l=0;l<r.length;l+=1)r[l].m(t,null);n=!0},p(s,[c]){if(c&1){i=s[0];let l;for(l=0;l<i.length;l+=1){const o=ge(s,i,l);r[l]?(r[l].p(o,c),j(r[l],1)):(r[l]=ye(o),r[l].c(),j(r[l],1),r[l].m(t,null))}for(Xe(),l=i.length;l<r.length;l+=1)u(l);Ge()}},i(s){if(!n){for(let c=0;c<i.length;c+=1)j(r[c]);n=!0}},o(s){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)ne(r[c]);n=!1},d(s){s&&g(t),Fe(r,s)}}}function lt(e,t,n){let i;return Oe(e,Te,r=>n(0,i=r)),z.subscribe(r=>{console.log(r)}),$e.subscribe(r=>{console.log("player changed ",r)}),Me.subscribe(r=>{console.log("players committed",r)}),Ce.subscribe(r=>{console.log("winner chosen",r)}),[i]}class st extends Ae{constructor(t){super(),ke(this,t,lt,it,re,{})}}new st({target:document.getElementById("app")});
